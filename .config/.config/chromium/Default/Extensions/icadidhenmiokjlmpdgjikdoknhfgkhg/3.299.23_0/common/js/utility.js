"use strict";var DM=DM||{};DM.utility={getDomain:function(e){var r=document.createElement("a");return r.href=e,{domain:r.host,pathname:r.pathname,url:e,protocol:r.protocol}},getTabPromise:function(e){var r=e.$q.defer();return chrome.tabs.query({active:!0,windowType:"normal",currentWindow:!0},function(t){var o;o=e.overrideUrl?DM.utility.getDomain(e.overrideUrl):DM.utility.getDomain(t[0].url),DM.testMode||0!==o.url.indexOf("chrome-extension")&&0!==o.url.indexOf("chrome://")&&0!==o.url.indexOf("https://chrome.google.com/webstore")?(e.tab=t[0],e.urlInfo=o,r.resolve(e)):(e.notice="Visit the website that you want to extract data from; then click on Data Miner icon in Chrome browser address bar to see all the Data Miner public recipes available that specific website.",r.reject(e))}),r.promise},pingPromise:function(e){var r=e.$q.defer(),t={command:"scraperPingTab",payload:{tab:e.tab.id}};return chrome.extension.sendRequest(t,function(t){!t||t.error||"I am here"!==t.result?confirm("Data Miner needs to reload this page before it can continue. Press OK to reload it now.")?(chrome.tabs.update(e.tab.id,{url:"javascript:window.location.reload()"}),r.resolve(e)):r.reject(new Error("Please reload the page.")):r.resolve(e)}),r.promise}};
//# sourceMappingURL=../../../map/common/js/utility.js.map