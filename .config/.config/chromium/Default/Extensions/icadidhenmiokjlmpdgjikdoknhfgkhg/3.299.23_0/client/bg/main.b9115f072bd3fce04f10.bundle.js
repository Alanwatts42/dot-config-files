webpackJsonp([1],{"+LL8":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("3j3K"),o=n("iu7K"),i=n("YtC4"),a=n("YO03"),s=n("2Je8"),u=n("Qbdm"),c=n("NVOs"),l=n("jPRv"),h=n("dyjq"),f=n("UWBK"),d=n("c/bU"),p=n("y3P1"),m=n("/PSk"),v=n("Fzro"),g=n("Tkuz"),y=n("8AXl"),b=n("nfmY"),_=n("Zhbi");t.BgModuleNgFactory=r.\u0275cmf(o.BgModule,[i.AppComponent],function(e){return r.\u0275mod([r.\u0275mpd(512,r.ComponentFactoryResolver,r.\u0275CodegenComponentFactoryResolver,[[8,[a.AppComponentNgFactory]],[3,r.ComponentFactoryResolver],r.NgModuleRef]),r.\u0275mpd(5120,r.LOCALE_ID,r.\u0275m,[[3,r.LOCALE_ID]]),r.\u0275mpd(4608,s.NgLocalization,s.NgLocaleLocalization,[r.LOCALE_ID]),r.\u0275mpd(4608,r.Compiler,r.Compiler,[]),r.\u0275mpd(5120,r.APP_ID,r.\u0275f,[]),r.\u0275mpd(5120,r.IterableDiffers,r.\u0275k,[]),r.\u0275mpd(5120,r.KeyValueDiffers,r.\u0275l,[]),r.\u0275mpd(4608,u.DomSanitizer,u.\u0275e,[s.DOCUMENT]),r.\u0275mpd(6144,r.Sanitizer,null,[u.DomSanitizer]),r.\u0275mpd(4608,u.HAMMER_GESTURE_CONFIG,u.HammerGestureConfig,[]),r.\u0275mpd(5120,u.EVENT_MANAGER_PLUGINS,function(e,t,n,r){return[new u.\u0275DomEventsPlugin(e),new u.\u0275KeyEventsPlugin(t),new u.\u0275HammerGesturesPlugin(n,r)]},[s.DOCUMENT,s.DOCUMENT,s.DOCUMENT,u.HAMMER_GESTURE_CONFIG]),r.\u0275mpd(4608,u.EventManager,u.EventManager,[u.EVENT_MANAGER_PLUGINS,r.NgZone]),r.\u0275mpd(135680,u.\u0275DomSharedStylesHost,u.\u0275DomSharedStylesHost,[s.DOCUMENT]),r.\u0275mpd(4608,u.\u0275DomRendererFactory2,u.\u0275DomRendererFactory2,[u.EventManager,u.\u0275DomSharedStylesHost]),r.\u0275mpd(6144,r.RendererFactory2,null,[u.\u0275DomRendererFactory2]),r.\u0275mpd(6144,u.\u0275SharedStylesHost,null,[u.\u0275DomSharedStylesHost]),r.\u0275mpd(4608,r.Testability,r.Testability,[r.NgZone]),r.\u0275mpd(4608,u.Meta,u.Meta,[s.DOCUMENT]),r.\u0275mpd(4608,u.Title,u.Title,[s.DOCUMENT]),r.\u0275mpd(4608,c.\u0275i,c.\u0275i,[]),r.\u0275mpd(4608,l.ListenerService,l.ListenerService,[h.Store,f.BgStateActions]),r.\u0275mpd(4608,d.ContentCommService,d.ContentCommService,[r.NgZone]),r.\u0275mpd(4608,p.WebsocketService,p.WebsocketService,[h.Store]),r.\u0275mpd(4608,m.CommandsRouter,m.CommandsRouter,[h.Store,p.WebsocketService,f.BgStateActions]),r.\u0275mpd(512,s.CommonModule,s.CommonModule,[]),r.\u0275mpd(512,r.ErrorHandler,o.RavenErrorHandler,[]),r.\u0275mpd(1024,r.APP_INITIALIZER,function(e,t){return[u.\u0275c(e,t)]},[[2,u.NgProbeToken],[2,r.NgProbeToken]]),r.\u0275mpd(512,r.ApplicationInitStatus,r.ApplicationInitStatus,[[2,r.APP_INITIALIZER]]),r.\u0275mpd(131584,r.\u0275e,r.\u0275e,[r.NgZone,r.\u0275Console,r.Injector,r.ErrorHandler,r.ComponentFactoryResolver,r.ApplicationInitStatus]),r.\u0275mpd(2048,r.ApplicationRef,null,[r.\u0275e]),r.\u0275mpd(512,r.ApplicationModule,r.ApplicationModule,[r.ApplicationRef]),r.\u0275mpd(512,u.BrowserModule,u.BrowserModule,[[3,u.BrowserModule]]),r.\u0275mpd(512,c.\u0275ba,c.\u0275ba,[]),r.\u0275mpd(512,c.FormsModule,c.FormsModule,[]),r.\u0275mpd(512,v.HttpModule,v.HttpModule,[]),r.\u0275mpd(131584,h.ActionsSubject,h.ActionsSubject,[]),r.\u0275mpd(2048,h.ReducerManagerDispatcher,null,[h.ActionsSubject]),r.\u0275mpd(256,h._INITIAL_STATE,{bgState:{user:null,counters:null,serverData:null,extension:null,pins:null}},[]),r.\u0275mpd(1024,h.INITIAL_STATE,h._initialStateFactory,[h._INITIAL_STATE]),r.\u0275mpd(256,h._INITIAL_REDUCERS,g.REDUCERS_TOKEN,[]),r.\u0275mpd(2048,h._STORE_REDUCERS,null,[h._INITIAL_REDUCERS]),r.\u0275mpd(1024,h.INITIAL_REDUCERS,h._createStoreReducers,[r.Injector,h._INITIAL_REDUCERS,h._STORE_REDUCERS]),r.\u0275mpd(256,h._REDUCER_FACTORY,h.combineReducers,[]),r.\u0275mpd(256,h.META_REDUCERS,[],[]),r.\u0275mpd(1024,h.REDUCER_FACTORY,h.createReducerFactory,[h._REDUCER_FACTORY,h.META_REDUCERS]),r.\u0275mpd(131584,h.ReducerManager,h.ReducerManager,[h.ReducerManagerDispatcher,h.INITIAL_STATE,h.INITIAL_REDUCERS,h.REDUCER_FACTORY]),r.\u0275mpd(2048,h.ReducerObservable,null,[h.ReducerManager]),r.\u0275mpd(131584,h.ScannedActionsSubject,h.ScannedActionsSubject,[]),r.\u0275mpd(512,h.StoreRootModule,h.StoreRootModule,[h.ActionsSubject,h.ReducerObservable,h.ScannedActionsSubject]),r.\u0275mpd(1024,y.\u0275g,y.\u0275b,[]),r.\u0275mpd(512,y.\u0275h,y.\u0275h,[y.\u0275g]),r.\u0275mpd(512,y.EffectSources,y.EffectSources,[y.\u0275h]),r.\u0275mpd(131584,h.State,h.State,[h.ActionsSubject,h.ReducerObservable,h.ScannedActionsSubject,h.INITIAL_STATE]),r.\u0275mpd(2048,h.StateObservable,null,[h.State]),r.\u0275mpd(512,h.Store,h.Store,[h.StateObservable,h.ActionsSubject,h.ReducerManager]),r.\u0275mpd(131584,y.\u0275i,y.\u0275i,[y.EffectSources,h.Store]),r.\u0275mpd(512,v.BrowserXhr,v.BrowserXhr,[]),r.\u0275mpd(512,v.ResponseOptions,v.BaseResponseOptions,[]),r.\u0275mpd(1024,v.XSRFStrategy,v.\u0275b,[]),r.\u0275mpd(512,v.XHRBackend,v.XHRBackend,[v.BrowserXhr,v.ResponseOptions,v.XSRFStrategy]),r.\u0275mpd(512,v.RequestOptions,v.BaseRequestOptions,[]),r.\u0275mpd(1024,v.Http,v.\u0275c,[v.XHRBackend,v.RequestOptions]),r.\u0275mpd(512,f.BgStateActions,f.BgStateActions,[r.ApplicationRef,h.Store]),r.\u0275mpd(512,b.BgStateService,b.BgStateService,[h.Store,v.Http,f.BgStateActions]),r.\u0275mpd(512,y.Actions,y.Actions,[h.ScannedActionsSubject]),r.\u0275mpd(512,_.BgStateEffects,_.BgStateEffects,[h.Store,b.BgStateService,y.Actions]),r.\u0275mpd(1024,y.\u0275e,y.\u0275a,[_.BgStateEffects]),r.\u0275mpd(512,y.\u0275c,y.\u0275c,[y.EffectSources,y.\u0275i,h.Store,y.\u0275e,[2,h.StoreModule]]),r.\u0275mpd(512,o.BgModule,o.BgModule,[]),r.\u0275mpd(256,g.REDUCERS_TOKEN,g.rootReducer,[])])})},"/L6G":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),n("owTz"),n("xgm2"),n("kJrM"),n("cxtG"),n("xInZ"),n("0eak"),n("jNaG"),n("PCB2"),n("VwFy"),n("F3G9"),n("v7CW"),n("o53x"),n("kWGS"),n("cPqY"),n("qYgd"),n("hNco"),n("/+N7"),n("aTdd"),n("PG6h"),n("n6VF"),n("2fw/"),n("bqhO"),n("ZJhL"),n("VKQ6"),n("a7sO"),n("2Gc2"),n("lMWm"),n("apTM"),n("TDKa"),n("u//w"),n("HUv8"),n("2vRS"),n("MQ0p"),n("bAW0"),n("uX89"),n("MDfR"),n("5wxv")},"/PSk":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("IJ8i"),o=n("M4fF"),i=n("ehMW"),a=n("dyjq"),s=n("UWBK"),u=n("y3P1"),c=n("ETHv"),l=function(){function e(e,t,n){var a=this;this._store=e,this._websocketService=t,this._bgStateActions=n,this.ee=function(e,t,n){switch(+e.command){case r.Command.sendVote:return a.s.u(r.Command.sendVote,e.payload,{socket:a._websocketService}).c(r.Command.sendVote).subscribe(function(e){try{n(e)}catch(e){}},function(){}),!0;case r.Command.getBGSettings:return n({status:"done",settings:a.bg_settings.iframes[e.payload.host]}),!0;case r.Command.setBGUser:return a._bgStateActions._setUser(e.payload),n({status:"done"}),!0;case r.Command.setBGSettings:return a.bg_settings.iframes=o.merge({},a.bg_settings.iframes,e.payload),n({status:"done"}),!0;case r.Command.removeBGSettings:return delete a.bg_settings.iframes[e.payload.host],n({status:"done"}),!0}return!0},chrome.runtime.onMessage.addListener(this.ee),this.s=new i.CommandFactoryBg,this.bg_settings={iframes:{}},this.bg=chrome.extension.getBackgroundPage().dmBackground,this.bg.sendVoteProxy=function(e,t){e.payload.content.data.recipe=c.DmUtility.el(e.payload.content.data.recipe),a.ee(e,{},t)}}return e.ctorParameters=function(){return[{type:a.Store},{type:u.WebsocketService},{type:s.BgStateActions}]},e}();t.CommandsRouter=l},0:function(e,t,n){e.exports=n("kk9o")},"6GLz":function(e,t){function n(e){return Promise.resolve().then(function(){throw new Error("Cannot find module '"+e+"'.")})}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id="6GLz"},"9C4N":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.DM_GLOBAL={extensio_id:"icadidhenmiokjlmpdgjikdoknhfgkhg",extension_type:"rc-043d7813-a73a-4e9b-be24-e0dcda33fde9"}},ETHv:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("/Hyb"),o=n("YaPU"),i=n("kZql"),a=n("IJ8i"),s=function(){function e(){}return e.nl=function(e){var t=document.createElement("a");return t.href=e,{domain:t.host,pathname:t.pathname,url:e,protocol:t.protocol}},e.Rn=function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()},e.ll=function(e){var t=new Uint32Array(2);crypto.getRandomValues(t);for(var n="",r=0;r<t.length;++r)n+=t[r].toString(36);return n.substring(0,e)},e.ul=function(e){for(var t="",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz12345678901234567890123456789012345678901234567890",r=0;r<e;r++)t+=n.charAt(Math.floor(Math.random()*n.length));return t},e.tn=function(e,t){return t.restricted&&t.restricted.indexOf("Free plan")>-1&&"popup"!==e?{error:{title:"",body:"<a href='https://data-miner.io/account' target='_blank'><img src='assets/img/limit-free-upgrade@2x.png'></a>",alertType:"alert-default"}}:t.restricted&&t.restricted.indexOf("have exceeded")>-1&&"popup"!==e?{error:{title:"",body:"<a href='https://data-miner.io/account' target='_blank'><img src='assets/img/limit-upgrade@2x.png'></a>",alertType:"alert-default"}}:t.restricted&&t.restricted.indexOf("is restricted")>-1&&"popup"!==e?{error:{title:"",body:"<a href='https://data-miner.io/account' target='_blank'><img src='assets/img/limit-some-domains@2x.png'></a>",alertType:"alert-default"}}:void 0},e.ln=function(e,t,n,o){var a="login_test?uid="+t+"&c="+n+"&url="+encodeURIComponent(o).slice(0,1e3);return e.get(i.environment.apiEndPoint+a).map(function(e){var o,s;try{o=e.json()}catch(o){throw e.url!==i.environment.apiEndPoint+a?r.captureMessage("proxy-redirect-error",{level:"info",extra:{uid:t,version:n,url:e.url,response:e.text(),error:o}}):o.message.startsWith("Unexpected token")?r.captureMessage("proxy-parse-error",{level:"info",extra:{uid:t,version:n,url:e.url,response:e.text(),error:o}}):o.message.startsWith("SyntaxError")?(r.captureBreadcrumb({message:"parse_error",category:"login_test",data:{uid:t,version:n,url:e.url,response:e.text(),error:o}}),r.captureMessage("login-error",{level:"info",extra:{url:e.url,response:e.text()}})):(r.captureBreadcrumb({message:"other_login_error",category:"login_test",data:{uid:t,version:n,url:e.url,response:e.text(),error:o}}),r.captureException(o)),new Error(o)}if("NEEDAUTH"===o.error)throw new Error("login-needed");return s={user:{user_id:o.user_id,email:o.user_name,jwe:o.jwe},serverData:o},r.setUserContext({id:o.user_id,email:o.user_name}),s.pins=o.pins,s}).retryWhen(function(e){return e.scan(function(e,t){if("login-needed"===t.message||"redirect-error"===t.message)throw new Error("login-needed");if(r.captureBreadcrumb({message:"network_error",category:"login_test",data:{url:a,error:t}}),e>=2)throw new Error("login-network-error");return e+1},0).delay(3e3)})},e.tl=function(e,t){var n,r=String.fromCharCode.apply(String,[32,91,85,112,103,114,97,100,101,32,116,111,32,115,101,101,32,105,110,32,102,117,108,108,93]);if(e&&"segment"in e&&(n=e.segment),n&&"restricted"in n)for(var i=0;i<t.rows.length;i++)for(var a=0;a<t.rows[i].length;a++)t.rows[i][a].length>50/7&&(t.rows[i][a]=t.rows[i][a].substring(0,50/7)+r);return o.Observable.of({results:t,restriction:void 0})},e.Ln=function(e){var t={comment:"",domain:"xxx",regex_page:"",name:"xxx",example_url:"",url:"xxx",description_url:"",recipe_icon_url:"",regex_url:"",regex_domain:"xxx",data:{schema:"1.1",recipe_type:"xxx",next_page:"",next_page_type:"click",next_page_time:2,language:"xxx",selector:"xxx",attributes:[]}};e.actionsPre&&e.actionsPre.length>0&&(t.data.actionsPre=e.actionsPre),t.name=(e.recipeName||"").trim(),t.comment=(e.comment||"").trim(),t.data.recipe_type="detail"===e.recipeType?"detail":"list",t.domain=e.domain.domainName,t.url=e.domain.url,t.regex_domain=e.domain.regex,t.data.language=e.language===a.Language.jquery?"jquery":"xpath",""!==e.next.query&&(t.data.next_page=e.next.query,t.data.next_page_time=2),t.data.selector=e.row.query;for(var n=0,r=e.cols;n<r.length;n++){var o=r[n],i={name:o.name,method:o.method};e.language===a.Language.jquery?i.query=o.query:i.xpath=o.query,o.attribute&&(o.attribute||"").trim()&&(i.attribute=o.attribute),t.data.attributes.push(i)}return t.recipe_id=e.recipeId,t.parent_recipe_id=e.parentRecipeId,e.scripts&&e.scripts.length>0&&(t.data.script=e.scripts[0].script.trim(),t.data.script_type=e.scripts[0].scriptType,t.data.script_schema=e.scripts[0].schema),t},e.el=function(t){var n={};n.schema=a.En,n.id=t.id,n.recipeId=t.recipe_id,n.row={id:e.Rn(),name:"Row Selector",query:t.data.selector},n.next={id:e.Rn(),name:"Next Page",query:t.data.next_page},n.cols=[];for(var r=0,o=t.data.attributes;r<o.length;r++){var i=o[r],s=void 0,u=void 0,c=void 0,l=void 0;"xpath"===t.data.language?(s=i.xpath,n.language=a.Language.xpath):"jquery"===t.data.language&&(s=i.query,n.language=a.Language.jquery,void 0===i.attribute&&""===i.attribute||(c=i.attribute)),u="text"===i.method?0:"text_direct"===i.method?1:"html"===i.method?2:"url"===i.method?3:"src"===i.method?4:"attribute"===i.method?5:void 0===i.method?0:i.method,l={id:e.Rn(),name:i.name,query:s,method:u},void 0!==c&&(l.attribute=c),n.cols.push(l)}return void 0!==t.data.recipe_type&&""!=t.data.recipe_type.trim()||(t.data.recipe_type="list"),n.recipeType=t.data.recipe_type,n.domain={domainName:(t.domain||"").trim(),regex:t.regex_domain||(t.domain||"").trim(),url:(t.url||"").trim()},n.recipeName=(t.name||"").trim(),n.comment=(t.comment||"").trim(),n.recipeId=t.recipe_id,t.data.script_type&&t.data.script&&""!==t.data.script.trim()?n.scripts=[{script:t.data.script.trim(),scriptType:t.data.script_type,schema:t.data.script_schema||"1.0"}]:n.scripts=[{script:"",scriptType:"none",schema:"1.0"}],void 0!==t.data.actionsPre?n.actionsPre=t.data.actionsPre:n.actionsPre=[],n},e.il=function(){var e;r.captureBreadcrumb({message:"document_info",category:"iframe",data:{referrer:document.referrer,document_location:document.location}});var t="";try{"object"!=typeof chrome?t="resources-needed-chrome":"object"!=typeof chrome.runtime?t="resources-needed-chrome.runtime":"object"!=typeof chrome.tabs&&(t="resources-needed-chrome.tabs")}catch(e){r.captureException(e),t=e.message}return!!t&&(r.captureBreadcrumb({message:"load_error",category:"iframe",data:{error:t}}),t.startsWith("Failed to read the 'localStorage' property from 'Window'")?(e='     <strong>Cause:</strong> Your Chrome settings don\'t allow third party cookies. To make a recipe this extension \n                                needs to save temporary data in your cookies.<br><br>\n                                <strong>Solution:</strong> To solve this problem please follow the steps below:<br><br>\n                                1) Copy & Paste this URL in address bar: <br>\n                                <strong>chrome://settings/content/cookies</strong><br><br>\n                                2) Turn off (make it gray) "Block third-party cookies"\n                                <br><br><br>\n                                For detail step by step instructions to enable cookies visit:<br> \n                                <a href="https://data-miner.io/allow-cookies" target="_blank">https://data-miner.io/allow-cookies</a>.\n                                <br>You can contact us via <a href="mailto:support@data-miner.io" target="_blank">support@data-miner.io</a> \n                                if you need further assistance. <br> \n                                ',r.captureMessage("rc-load-missing-localstorage",{level:"info",extra:{error:t}})):t.startsWith("resources-needed")?(e='     Unfortunately Data Miner has encountered a problem. \n                                <br><br>\n                                If your chrome version is less than <strong>version 61</strong> you should upgrade it to be able to use Data Miner. \n                                Upgrade your browser from <a href="https://www.google.com/chrome" target="_blank">https://www.google.com/chrome</a>\n                                <br><br>If you have Chrome 61+ and this error keeps happening on your machine <strong>We will reward you a \n                                1000 scraping credits if you show our developers this error so they can investigate why it happens.\n                                Please contact us via <a href="mailto:support@data-miner.io" target="_blank">support@data-miner.io</a>\n                                </strong><br><br> \n                                <strong>Error:</strong> '+t,r.captureMessage("rc-load-resources-needed",{level:"info",extra:{error:t}})):e='     Unfortunately Data Miner has encountered a problem. Please reload this page.\n                                <br><br>\n                                If your chrome version is less than <strong>version 61</strong> you should upgrade it to be able to use Data Miner. \n                                Upgrade your browser from <a href="https://www.google.com/chrome" target="_blank">https://www.google.com/chrome</a>\n                                <br><br>If the problem persists please contact us via <a href="mailto:support@data-miner.io" target="_blank">\n                                support@data-miner.io</a> so we can further assist you. <br><br> \n                                <strong>Error:</strong> '+t,{error:t,resolution:"error-message",message:e})},e}();t.DmUtility=s},HFz5:function(e,t,n){"use strict";var r,o=this&&this.__extends||(r=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])},function(e,t){function n(){this.constructor=e}r(e,t),e.prototype=null===t?Object.create(t):(n.prototype=t.prototype,new n)});Object.defineProperty(t,"__esModule",{value:!0});var i=n("/Hyb"),a=n("YaPU"),s=n("lMIw"),u=n("kZql"),c=function(e){function t(t,n){var r=e.call(this,t,n)||this;return r._socket=n.socket,r}return o(t,e),t.prototype.c=function(e){var t=this;return this.payload.serverUrl===u.environment.apiVoteEndPoint?a.Observable.ajax.post(this.payload.serverUrl,this.payload.content,{"Content-Type":"application/json"}).map(function(e){var n;try{n=e.response}catch(n){throw i.captureBreadcrumb({message:"parse_error",category:"send_vote",data:{response:e.response,url:t.payload.serverUrl,error:n}}),i.captureException(n),n}return a.Observable.of(n)}).catch(function(e){return a.Observable.of({})}):(this._socket.h(this.payload.content),a.Observable.of({}))},t}(s.CommandBase);t.CommandVote=c},IJ8i:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),function(e){e[e.xpath=0]="xpath",e[e.jquery=1]="jquery"}(t.Language||(t.Language={})),function(e){e[e.text=0]="text",e[e.text_direct=1]="text_direct",e[e.html=2]="html",e[e.url=3]="url",e[e.src=4]="src",e[e.attribute=5]="attribute"}(t.Method||(t.Method={})),function(e){e[e.scrape=0]="scrape",e[e.clearSelection=1]="clearSelection",e[e.ping=2]="ping",e[e.insertIframe=3]="insertIframe",e[e.getElement=4]="getElement",e[e.goUpParent=5]="goUpParent",e[e.toggleIframe=6]="toggleIframe",e[e.removeIframe=7]="removeIframe",e[e.highlightQuery=8]="highlightQuery",e[e.navigateNextPage=9]="navigateNextPage",e[e.getPageInfo=10]="getPageInfo",e[e.enableHighlighter=11]="enableHighlighter",e[e.disableHighlighter=12]="disableHighlighter",e[e.tryRecipe=13]="tryRecipe",e[e.scrapeNextPage=14]="scrapeNextPage",e[e.moveIframe=15]="moveIframe",e[e.runPostScript=16]="runPostScript",e[e.sendVote=17]="sendVote",e[e.createRecipe=18]="createRecipe",e[e.runPreScript=19]="runPreScript",e[e.highlightedElementInfo=20]="highlightedElementInfo",e[e.reOpenIframe=21]="reOpenIframe",e[e.runAction=22]="runAction",e[e.getBGSettings=23]="getBGSettings",e[e.setBGSettings=24]="setBGSettings",e[e.removeBGSettings=25]="removeBGSettings",e[e.setBGUser=26]="setBGUser"}(t.Command||(t.Command={})),function(e){e[e.preClick=0]="preClick",e[e.preScroll=1]="preScroll",e[e.preInfiniteScrollClick=2]="preInfiniteScrollClick",e[e.postClick=3]="postClick"}(t.Action||(t.Action={})),t.En=8},QCxu:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.styles=[""]},RXfN:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.BgStateInitialState={user:null,counters:null,serverData:null,extension:null,pins:null}},Tkuz:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("rKkt"),o=n("3j3K");t.rootReducer={bgState:r.default},t.REDUCERS_TOKEN=new o.InjectionToken("Registered Reducers"),t.REDUCER_PROVIDER=[{provide:t.REDUCERS_TOKEN,useValue:t.rootReducer}]},UWBK:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("3j3K"),o=n("dyjq"),i=function(){function e(e,t){this._appRef=e,this.store=t}return e.prototype._setInitial=function(t){this.store.dispatch({type:e.SET_INITIAL,payload:t})},e.prototype._setCheckDate=function(t){this.store.dispatch({type:e.SET_CHECK_DATE,payload:t})},e.prototype._setUID=function(t){this.store.dispatch({type:e.SET_UID,payload:t})},e.prototype._setUser=function(t){this.store.dispatch({type:e.SET_USER,payload:t})},e.prototype._setCounters=function(t){this.store.dispatch({type:e.SET_COUNTERS,payload:t})},e.ctorParameters=function(){return[{type:r.ApplicationRef},{type:o.Store}]},e.SET_INITIAL="SET_INITIAL",e.SET_UID="SET_UID",e.SET_CHECK_DATE="SET_CHECK_DATE",e.SET_USER="SET_USER",e.SET_COUNTERS="SET_COUNTERS",e.NO_ACTION="NO_ACTION",e}();t.BgStateActions=i},YO03:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("QCxu"),o=n("3j3K"),i=n("YtC4"),a=n("dyjq"),s=n("Fzro"),u=n("/PSk"),c=n("jPRv"),l=n("nfmY"),h=n("UWBK"),f=[r.styles];function d(e){return o.\u0275vid(0,[],null,null)}function p(e){return o.\u0275vid(0,[(e()(),o.\u0275eld(0,0,null,null,1,"app-root",[],null,null,null,d,t.RenderType_AppComponent)),o.\u0275did(1,49152,null,0,i.AppComponent,[a.Store,s.Http,u.CommandsRouter,c.ListenerService,l.BgStateService,h.BgStateActions],null,null)],null,null)}t.RenderType_AppComponent=o.\u0275crt({encapsulation:0,styles:f,data:{}}),t.View_AppComponent_0=d,t.View_AppComponent_Host_0=p,t.AppComponentNgFactory=o.\u0275ccf("app-root",i.AppComponent,p,{},{},[])},YtC4:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("dyjq"),o=n("UWBK"),i=n("nfmY"),a=n("jPRv"),s=n("Fzro"),u=n("/PSk"),c=n("ETHv"),l=function(){function e(e,t,n,r,o,i){var a=this;this._store=e,this._http=t,this._commandsRouter=n,this._listenerService=r,this._bgStateService=o,this._bgStateActions=i,ga("send","pageview","background"),this._bgState$=this._store.select(function(e){return e.bgState}).share(),this._bgState$.debounceTime(1e4).filter(function(e){return null!==e.user&&void 0!==e.user.uid}).take(1).switchMap(function(e){return c.DmUtility.ln(a._http,e.user.uid,e.extension.version,"background")}).subscribe(function(e){a._bgStateActions._setInitial(e)},function(e){"xxx"===e&&alert(e)})}return e.ctorParameters=function(){return[{type:r.Store},{type:s.Http},{type:u.CommandsRouter},{type:a.ListenerService},{type:i.BgStateService},{type:o.BgStateActions}]},e}();t.AppComponent=l},Zhbi:function(e,t,n){"use strict";var r=this&&this.__decorate||function(e,t,n,r){var o,i=arguments.length,a=i<3?t:null===r?r=Object.getOwnPropertyDescriptor(t,n):r;if("object"==typeof Reflect&&"function"==typeof Reflect.decorate)a=Reflect.decorate(e,t,n,r);else for(var s=e.length-1;s>=0;s--)(o=e[s])&&(a=(i<3?o(a):i>3?o(t,n,a):o(t,n))||a);return i>3&&a&&Object.defineProperty(t,n,a),a},o=this&&this.__metadata||function(e,t){if("object"==typeof Reflect&&"function"==typeof Reflect.metadata)return Reflect.metadata(e,t)};Object.defineProperty(t,"__esModule",{value:!0});var i=n("8AXl"),a=n("dyjq"),s=n("YaPU"),u=n("UWBK"),c=n("nfmY"),l=function(){function e(e,t,n){var r=this;this._store=e,this._bgStateService=t,this._actions$=n,this._logUser$=this._actions$.ofType(u.BgStateActions.SET_INITIAL,u.BgStateActions.SET_CHECK_DATE,u.BgStateActions.SET_USER,u.BgStateActions.SET_COUNTERS).withLatestFrom(this._store.select(function(e){return e.bgState})).filter(function(e){e[0];return null!==e[1].user}).switchMap(function(e){e[0];var t=e[1];return r._bgStateService._saveUserState(t),s.Observable.of({type:u.BgStateActions.NO_ACTION})})}return e.ctorParameters=function(){return[{type:a.Store},{type:c.BgStateService},{type:i.Actions}]},r([i.Effect(),o("design:type","function"==typeof(t="undefined"!=typeof s.Observable&&s.Observable)&&t||Object)],e.prototype,"_logUser$",void 0),e;var t}();t.BgStateEffects=l},"c/bU":function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("3j3K"),o=n("YaPU"),i=n("IJ8i"),a=n("/Hyb"),s=n("8eev"),u=n("ETHv"),c=function(){function e(e){this._zone=e}return e.prototype.cl=function(t){var n=this;return this._connectedTab=t.id,new o.Observable(function(t){var r=function(e,r){n._connectedTab===r.sender.tab.id&&t.next({readyState:e.readyState})};chrome.runtime.onConnect.addListener(function(t){t.name===e._CS_CHANNEL&&(n._portCS=t,n._portCS.onMessage.addListener(r))})})},e.prototype.dl=function(e,t,n){"manual"===n&&(t.meta=t.meta||{},t.meta.nextWaitTime=1);for(var r={command:i.Command.scrape,payload:{url:e.url,recipe:t,mode:n,collection_id:""}},a=[],s=0,u=t.cols;s<u.length;s++){var c=u[s];a.push(c.name)}return new o.Observable(function(t){chrome.tabs.sendMessage(e.id,r,{},function(n){n?t.next({rows:n.result.rows,heads:a,tab:e,url:e.url,htmlSource:n.result.htmlSource}):console.log("no response")})})},e.prototype.hl=function(e,t,n){var r={command:i.Command.runPostScript,payload:{script:t,context:n}};return new o.Observable(function(t){chrome.tabs.sendMessage(e.id,r,{},function(e){t.next(e.result)})})},e.prototype.pl=function(e,t,n){var r={command:i.Command.runPreScript,payload:{script:t,context:n}};return new o.Observable(function(t){chrome.tabs.sendMessage(e.id,r,{},function(e){t.next(null)})})},e.prototype.gl=function(e,t,n){var r={command:i.Command.runAction,payload:{action:t,context:n}};return new o.Observable(function(t){chrome.tabs.sendMessage(e.id,r,{},function(e){t.next({}),t.complete()})})},e.prototype.vl=function(e,t){var n={command:i.Command.tryRecipe,payload:{tab:t.id,url:t.url,communityRecipes:e.communityRecipes,userRecipes:e.userRecipes,mode:"try"}};return new o.Observable(function(r){e.error&&"NEEDAUTH"===e.error&&r.error(new Error("need-auth")),chrome.tabs.sendMessage(t.id,n,{},function(e){e.result.communityRecipes=e.result.communityRecipes.sort(function(e,t){return t.containerQuality-e.containerQuality||t.quality-e.quality}),r.next({result:e.result,tab:t})})})},e.prototype.al=function(e,t){var n={command:i.Command.navigateNextPage,payload:{recipe:t}};return new o.Observable(function(t){chrome.tabs.sendMessage(e.id,n,{},function(n){t.next({result:"success",tabId:e.id})})})},e.prototype.Bn=function(){var e=new s.AsyncSubject;return chrome.tabs.query({active:!0,windowType:"normal",currentWindow:!0},function(t){var n=t[0];a.captureBreadcrumb({message:"get_tab",category:"dmc",data:{tab:n}});var r=n.url;if(void 0==r||""===r||""===r.trim())e.error(new Error("blocked-domains"));else if(0===r.indexOf("chrome-extension")||0===r.indexOf("chrome://")||0===r.indexOf("file://"))e.error(new Error("blocked-domains"));else if(0===r.indexOf("https://chrome.google.com/webstore"))e.error(new Error("chrome-store"));else{var o=chrome.extension.getBackgroundPage();o.DMState.lastUrlInfo=u.DmUtility.nl(r),e.next({id:n.id,url:n.url,url_info:o.DMState.lastUrlInfo}),e.complete()}}),e.asObservable()},e.prototype.Wn=function(e){var t={command:i.Command.ping,payload:{tab_id:e.id}};return new o.Observable(function(n){chrome.tabs.sendMessage(e.id,t,{},function(e){!e||e.error||"I am here"!==e.result?n.error(new Error("tab-closed")):n.next("I am here")})})},e.prototype.mn=function(e,t){var n={command:i.Command.insertIframe,payload:{chrome_id:t}};return new o.Observable(function(t){chrome.tabs.sendMessage(e.id,n,{},function(n){t.next(e)})})},e.prototype.ol=function(e,t,n,r){var a={command:i.Command.getElement,payload:{tab:e.id,selector:t,language:r,method:n}};return new o.Observable(function(t){chrome.tabs.sendMessage(e.id,a,{},function(e){t.next(e.result)})})},e.ctorParameters=function(){return[{type:r.NgZone}]},e._CS_CHANNEL="cs",e}();t.ContentCommService=c},ehMW:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("HFz5"),o=n("IJ8i"),i=function(){function e(){this.f={}}return e.prototype.u=function(e,t,n){switch(+e){case o.Command.sendVote:return this.f[o.Command.sendVote]?this.f[o.Command.sendVote].init(t,n):this.f[o.Command.sendVote]=new r.CommandVote(t,n),this.f[o.Command.sendVote];default:return null}},e}();t.CommandFactoryBg=i},iu7K:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("/Hyb");n("/L6G");var o=n("kZql");ga("create",o.environment.analyticsID,"auto"),ga("set","checkProtocolTask",function(){}),ga("send","event","version",chrome.runtime.getManifest().version);var i=function(){function e(){}return e.prototype.handleError=function(e){console.log(e),r.captureException(e)},e}();t.RavenErrorHandler=i,o.environment.errorReporting?r.config(o.environment.sentry,{environment:!0===o.environment.production?"production":"dev",release:chrome.runtime.getManifest().version}).install():console.log("==== NOT Reporting Errors ====");var a=function(){return function(){}}();t.BgModule=a},jPRv:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("dyjq"),o=n("kZql"),i=n("g5jc"),a=n("UWBK"),s=n("IJ8i"),u=n("ETHv"),c=n("9C4N"),l=function(){function e(e,t){var n=this;this._store=e,this._bgStateActions=t,this._extensionInstallNotification$=new i.Subject,this._appVersion=chrome.runtime.getManifest().version,this._setupUpdateListener(this._extensionInstallNotification$),"dm"===c.DM_GLOBAL.extension_type.split("-")[0]&&this._setupRightClickButton(),this._bgState$=this._store.select(function(e){return e.bgState}).shareReplay(),this._bgState$.filter(function(e){return null!==e.user&&void 0!==e.user.uid}).take(1).subscribe(function(e){n._setupUninstall(e),n._bgState=e}),this._extensionInstallNotification$.withLatestFrom(this._bgState$.filter(function(e){return null!==e.user&&void 0!==e.user.uid})).subscribe(function(e){var t=e[0],n=e[1];if("installed"===t.type)chrome.tabs.create({url:o.environment.serverURL+"u/"+n.user.uid+"/new/welcome"});else if("updated"===t.type){var r=chrome.runtime.getManifest().version.split("."),i=t.details.previousVersion.split(".");parseInt(r[0],10)>4&&parseInt(r[0],10)>parseInt(i[0],10)&&chrome.tabs.create({url:o.environment.serverURL+"u/"+n.user.uid+"/update/welcome"})}})}return e.prototype._setupUninstall=function(e){var t=e.user.uid,n=(new Date).setHours(0,0,0,0);e.extension.check_date!==n&&(this._bgStateActions._setCheckDate(n),chrome.runtime.requestUpdateCheck(function(e){"update_available"===e?console.log("https://data-miner.io: update pending..."):"no_update"===e||"throttled"===e&&console.log("https://data-miner.io: Oops, I'm asking too frequently - I need to back off.")})),"dm"===c.DM_GLOBAL.extension_type.split("-")[0]?chrome.runtime.setUninstallURL(o.environment.serverURL+"u/"+t+"/uninstall/thanks"):"rc"===c.DM_GLOBAL.extension_type.split("-")[0]&&chrome.runtime.setUninstallURL(o.environment.serverURL+"u/"+t+"/uninstall/rc-thanks")},e.prototype._setupUpdateListener=function(e){chrome.runtime.onInstalled.addListener(function(t){"update"===t.reason?e.next({type:"updated",details:t}):e.next({type:"installed",details:t})}),chrome.runtime.onUpdateAvailable.addListener(function(e){console.log("updating to version "+e.version),chrome.runtime.reload()})},e.prototype._setupRightClickButton=function(){chrome.contextMenus.removeAll(function(){chrome.contextMenus.create({title:"Get Similar (Data Miner)",contexts:["all"],onclick:function(e,t){var n={command:s.Command.createRecipe,payload:{}};chrome.tabs.sendMessage(t.id,n,{},function(e){if(e&&e.result){var n,r=e.result;r.recipe?(n=u.DmUtility.el({schema:s.En,id:0,recipeId:"",name:"Auto-generated Recipe ("+u.DmUtility.ul(5)+")",domain:r.pageInfo.domain,url:r.pageInfo.url,data:{selector:r.recipe.selector,attributes:r.recipe.attributes,language:r.recipe.language,next_page:""}}),localStorage[c.DM_GLOBAL.extensio_id+"viewer.stringify_recipe"]=JSON.stringify(n)):localStorage[c.DM_GLOBAL.extensio_id+"viewer.stringify_recipe"]="{}",localStorage[c.DM_GLOBAL.extensio_id+"viewer.stringify_tab"]=JSON.stringify(t),chrome.windows.create({url:chrome.extension.getURL("client/dist/index.html#/viewer"),type:"popup",width:Math.max(1200,parseInt(localStorage[c.DM_GLOBAL.extensio_id+"viewer.width"]||.8*screen.width,10)),left:400,top:400,height:Math.max(600,parseInt(localStorage[c.DM_GLOBAL.extensio_id+"viewer.height"]||.8*screen.height,10))})}else chrome.tabs.executeScript(t.id,{code:'alert("Initializing Data Miner... Please reload this web page and re-open Data Miner.");'})})}})})},e.ctorParameters=function(){return[{type:r.Store},{type:a.BgStateActions}]},e}();t.ListenerService=l},kZql:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.environment={errorReporting:!0,production:!0,mock:!1,apiEndPoint:"https://data-miner.io/v3/",apiRecipeQualityEndPoint:"wss://api.dataminer.io/connect/v1.2/",apiVoteEndPoint:"https://api.data-miner.io/v1.5/vote/",serverURL:"https://data-miner.io/",sentry:"https://4c239843559f492a88bedc8a536a2393@sentry.io/1201985",analyticsID:"UA-12630940-7"}},kk9o:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("3j3K"),o=n("kZql"),i=n("+LL8"),a=n("Qbdm");o.environment.production&&r.enableProdMode(),a.platformBrowser().bootstrapModuleFactory(i.BgModuleNgFactory)},lMIw:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function e(e,t){this._payload=e,this._context=t}return Object.defineProperty(e.prototype,"context",{get:function(){return this._context},enumerable:!0,configurable:!0}),Object.defineProperty(e.prototype,"payload",{get:function(){return this._payload},enumerable:!0,configurable:!0}),e.prototype.init=function(e,t){this._payload=e,this._context=t},e}();t.CommandBase=r},nfmY:function(e,t,n){"use strict";var r=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e};Object.defineProperty(t,"__esModule",{value:!0});var o=n("dyjq"),i=n("UWBK"),a=n("YaPU"),s=n("ETHv"),u=n("Fzro"),c=function(){function e(e,t,n){var r=this;this._store=e,this._http=t,this._bgStateActions=n,this._load().subscribe(function(e){r._bgStateActions._setInitial(e)})}return e.prototype._saveUserState=function(e){var t={},n=chrome.extension.getBackgroundPage().dmBackground;n.user=n.user||{},n.counters=n.counters||{},e.user&&e.user.email&&(t=r({},t,{email:e.user.email}),n.user.user_id=e.user.user_id),e.user&&e.user.user_id&&(t=r({},t,{user_id:e.user.user_id}),n.user.user_id=e.user.user_id),e.user&&e.user.uid&&(t=r({},t,{uid:e.user.uid})),e.sleep&&(t=r({},t,{sleep:e.sleep})),e.extension&&e.extension.check_date&&(t=r({},t,{check_date:e.extension.check_date})),e.extension&&e.extension.install_date&&(t=r({},t,{install_date:e.extension.install_date})),e.counters&&e.counters.today&&(t=r({},t,{today:e.counters.today}),n.counters.today=e.counters.today),e.counters&&e.counters.today_count&&(t=r({},t,{today_count:e.counters.today_count}),n.counters.today_count=e.counters.today_count),e.counters&&e.counters.total_count&&(t=r({},t,{total_count:e.counters.total_count}),n.counters.total_count=e.counters.total_count),e.counters&&e.counters.token&&(t=r({},t,{token:e.counters.token}),n.counters.token=e.counters.token),chrome.storage.sync.set(t),void 0!==e.serverData&&(n.serverData=e.serverData)},e.prototype._load=function(){return new a.Observable(function(t){var n=chrome.runtime.getManifest().version;chrome.storage.sync.get(e.LOCAL_STORE_KEY_LIST,function(e){var r={user:{},counters:{},extension:{}},o=(new Date).setHours(0,0,0,0);void 0===e.uid&&(e.uid=s.DmUtility.ll(10),e.install_date=o),r.user={uid:e.uid,user_id:e.user_id,email:e.email},r.counters={today_count:parseInt(e.today_count||"0",10),total_count:parseInt(e.total_count||"0",10),token:e.token||"",today:o},r.extension={version:n,sleep:e.sleep,install_date:e.install_date,check_date:e.check_date},t.next(r)})})},e.ctorParameters=function(){return[{type:o.Store},{type:u.Http},{type:i.BgStateActions}]},e.LOCAL_STORE_KEY_LIST=["uid","email","user_id","today","server","sleep","refresh","today_count","total_count","token","install_date","check_date"],e}();t.BgStateService=c},rKkt:function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var r=n("RXfN"),o=n("UWBK"),i=n("M4fF");t.default=function(e,t){switch(void 0===e&&(e=r.BgStateInitialState),t.type){case o.BgStateActions.SET_INITIAL:return i.merge({},e,t.payload);case o.BgStateActions.SET_CHECK_DATE:return i.merge({},e,{extension:{check_date:t.payload}});case o.BgStateActions.SET_USER:return i.merge({},e,{user:t.payload});case o.BgStateActions.SET_COUNTERS:return i.merge({},e,{counters:t.payload});default:return e}}},y3P1:function(e,t,n){"use strict";var r=this&&this.__assign||Object.assign||function(e){for(var t,n=1,r=arguments.length;n<r;n++)for(var o in t=arguments[n])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e};Object.defineProperty(t,"__esModule",{value:!0});var o=n("kZql"),i=n("/Hyb"),a=n("dyjq"),s=function(){function e(e){var t=this;this._store=e,this._WATCHDOG_TIMER=3e5,this._backLog=[],this._session=null,this._socket=null,this._connectionAttempts=0,this._connectionSendAttempts=0,this._connectionErrors=[],this._connectionClose=[],this._bgState$=this._store.select(function(e){return e.bgState}).filter(function(e){return null!==e}),this._bg={},this._bgState$._subscribe(function(e){t._bg=e})}return e.prototype.h=function(e){if(e&&this._backLog.push(e),!(this._backLog.length<1))if(this._socket&&this._socket.readyState===WebSocket.OPEN){try{if(this._connectionSendAttempts++,this._connectionSendAttempts>10)return i.captureMessage("socket-network-send-stuck",{level:"warning",extra:{bg:JSON.stringify(this._bg)}}),this._backLog=[],void(this._socket&&this._socket.readyState===WebSocket.OPEN&&this._socket.close());this._connectionClose.length>20&&(this._connectionClose=this._connectionClose.slice(20)),this._connectionErrors.length>20&&(this._connectionErrors=this._connectionErrors.slice(20));var t=JSON.stringify({type:"dm-event",data:{payload:this._backLog,user:r({schema:"1.1"},this._bg.user),connection:{connection_attempts:this._connectionAttempts,send_attempts:this._connectionSendAttempts,close:this._connectionClose,errors:this._connectionErrors}}});this._socket.send(t),this._connectionSendAttempts=0,this._connectionAttempts=0}catch(e){this._socket=null,i.captureMessage("socket-network-send-error",{level:"info",extra:{bg:this._bg,event:t}})}this._backLog=[]}else(null===this._socket||this._socket&&this._socket.readyState===WebSocket.CLOSED)&&this.te()},e.prototype.te=function(){var e=this;if(this._connectionAttempts>10)i.captureMessage("socket-network-connect-stuck",{level:"warning",extra:{bg:JSON.stringify(this._bg)}});else try{this._connectionAttempts++,this._socket=new WebSocket(o.environment.apiRecipeQualityEndPoint+"socket"),this._socket.onopen=function(){e.h(null)},this._socket.onclose=function(t){e._connectionClose.push(t.code),t.code,e._socket=null},this._socket.onerror=function(t){e._connectionErrors.push(t.type),1!==e._socket.readyState&&i.captureMessage("socket-network-connect-error1",{level:"info",extra:{bg:e._bg,event:t}})},this._socket.onmessage=function(e){}}catch(e){this._socket=null,i.captureMessage("socket-network-connect-error2",{level:"info",extra:{bg:this._bg}})}},e.ctorParameters=function(){return[{type:a.Store}]},e}();t.WebsocketService=s}},[0]);
//# sourceMappingURL=main.b9115f072bd3fce04f10.bundle.js.map