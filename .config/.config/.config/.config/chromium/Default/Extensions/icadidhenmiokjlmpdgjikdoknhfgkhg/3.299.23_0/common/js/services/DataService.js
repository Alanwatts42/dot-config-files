"use strict";angular.module("MetronicApp").factory("DataService",["$window","$q",function(e,n){var t=null,o=function(){var e=new Dexie("dataminer");return e.version(1).stores({collection:"++id, type, name, recipe_name, data, col_count, created_at"}),e.version(2).stores({collection:"++id, type, name, recipe_name, data, col_count, created_at",recipes:"id, type, name, data"}),t=e,e.open()};return o(),{open:o,getCollectionNames:function(){var e=n.defer();if(null===t)e.reject("IndexDB is not opened yet!");else{var o=[];t.collection.orderBy("name").eachUniqueKey(function(e){o.push(e)}).then(function(){e.resolve(o)}).catch(function(n){console.error(n.stack||n),e.reject("Something went wrong!!!")})}return e.promise},getCollectionData:function(e){var o=n.defer();return null===t?o.reject("IndexDB is not opened yet!"):t.collection.where("name").equals(e).toArray(function(e){o.resolve(e)}).catch(function(e){console.error(e.stack||e),o.reject("Something went wrong!!!")}),o.promise},addCollection:function(e){var o=n.defer();return null===t?o.reject("IndexDB is not opened yet!"):Array.isArray(e)?t.collection.bulkAdd(e).then(function(){o.resolve()}).catch(function(e){console.error(e.stack||e),o.reject("Something went wrong!!!")}):t.collection.add(e).then(function(){o.resolve()}).catch(function(e){console.error(e.stack||e),o.reject("Something went wrong!!!")}),o.promise},deleteCollection:function(e){var o=n.defer();return null===t?o.reject("IndexDB is not opened yet!"):t.collection.where("name").equals(e).delete().then(function(){o.resolve()}).catch(function(e){console.error(e.stack||e),o.reject("Something went wrong!!!")}),o.promise},deleteCollectionAll:function(){var e=n.defer();return null===t?e.reject("IndexDB is not opened yet!"):t.delete().then(function(){o()}).then(function(){e.resolve()}).catch(function(n){console.error(n.stack||n),e.reject("Something went wrong!!!")}),e.promise}}}]);
//# sourceMappingURL=../../../../map/common/js/services/DataService.js.map